<script src="">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<div class="form-group">
    Product name :<input type="text" name="input" id="input"> <br>
    <button id="button" name="button"> Submit </button>


    <ul id="sata"> </ul>
</div>
<%loop.forEach(function(loop){%>
    <ul>
        <li>Product Name:
            <%=loop.product%>
        </li>

        <li class="<%=loop._id%>"> Rating:
            <%loop.rating.length%>
        </li>
        <li>

        </li>
        <button id="<%=loop._id%>" name="rating" value="<%=loop._id%>"> Rat<%=//loop._id%> </button>
        <%const rating=loop._id%>

    </ul>
    <script>
        $(document).ready(function() {

            var $loop = $('.<%=loop._id%>');
            var $val = parseInt("<%=loop.rating.length%>") + 1;
            $('#<%=loop._id%>').on('click', function() {
                console.log($val);
                $loop.html("Rating: " + $val)
            })
        });
    </script>

    <script>
        $(document).ready(function() {
            // var $rating = $('#rating');
            // var $sata = $('#sata');
            // var $input = $('#input');
            $('#<%=loop._id%>').on('click', function() {
                console.log($('#<%=loop._id%>').val()); 
                var order = {
                    id: $('#<%=loop._id%>').val()
                }
                $.ajax({
                    type: 'POST',
                    url: '/rat/<%=loop._id%>',
                    data: order, //data field is extremely required
                    success: function(data) {
                        console.log("success");
                       
                    }
                })
            })
        })
    </script>
    <%});%>
        <script>
            $(document).ready(function() {
                var $sata = $('#sata');
                var $input = $('#input');
                $('#button').on('click', function() {
                    // console.log($input.val());
                    var order = {
                        input: $input.val()
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/ratupdate',
                        data: order, //data field is extremely required
                        success: function(data) {
                            console.log("success");
                            $sata.append("<li> Product Name:" + $input.val() + "</li>" + "<li>Rating: " + $input.val() + "</li>")
                        }
                    })
                })

            })
        </script>
        </body>
